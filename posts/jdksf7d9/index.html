<!doctype html><html lang=en><head><title>WSL 搭建生信分析环境 · Uncle4</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="YuanJiao"><meta name=description content="在做生信分析的时候，很多情况下都会用到 Linux 环境，而大多数人的电脑都是 Windows 环境，目前 Windows 下使用 Linux 最主流的两种方法就是服务器和虚拟机，但服务器的价格比较高，并且在文件传输等方面不太方便；虚拟机对电脑的要求比较高，并且占用也很大、启动时间长且配置较为麻烦，现如今，在 Windows 上已经有 WSL 了，使用它做生信分析极大地提高了效率，避免了很多问题
WSL 的优点 Link to heading 安装、配置方便，Windows10/11 原生集成，可迅速安装配置 启动速度快，配合 VScode 可迅速进入工作状态 占用低，可以通过 .wslconfig 来限制占用的硬件资源 文件传输方便，可以直接打开 Windows 下的文件 WSL2 已支持图形界面 与 Windows 系统互相独立互不干扰 可以备份恢复，便于迁移 WSL 的缺点 Link to heading 由于 WSL2 与 Windows 通过网络协议互相访问，导致直接访问 Windows 系统下的文件时速度会下降 Windows 自带的 openssh 版本低，导致 VScode 会与 WSL 断开连接 WSL 下使用 Windows 代理时需要配置 默认安装在 C 盘，但可以自行下载安装包解压后安装在其他盘 WSL 的安装 Link to heading 参考我的文章 Windows10 & 11 安装 WSL2"><meta name=keywords content="blog,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="WSL 搭建生信分析环境"><meta name=twitter:description content="在做生信分析的时候，很多情况下都会用到 Linux 环境，而大多数人的电脑都是 Windows 环境，目前 Windows 下使用 Linux 最主流的两种方法就是服务器和虚拟机，但服务器的价格比较高，并且在文件传输等方面不太方便；虚拟机对电脑的要求比较高，并且占用也很大、启动时间长且配置较为麻烦，现如今，在 Windows 上已经有 WSL 了，使用它做生信分析极大地提高了效率，避免了很多问题
WSL 的优点 Link to heading 安装、配置方便，Windows10/11 原生集成，可迅速安装配置 启动速度快，配合 VScode 可迅速进入工作状态 占用低，可以通过 .wslconfig 来限制占用的硬件资源 文件传输方便，可以直接打开 Windows 下的文件 WSL2 已支持图形界面 与 Windows 系统互相独立互不干扰 可以备份恢复，便于迁移 WSL 的缺点 Link to heading 由于 WSL2 与 Windows 通过网络协议互相访问，导致直接访问 Windows 系统下的文件时速度会下降 Windows 自带的 openssh 版本低，导致 VScode 会与 WSL 断开连接 WSL 下使用 Windows 代理时需要配置 默认安装在 C 盘，但可以自行下载安装包解压后安装在其他盘 WSL 的安装 Link to heading 参考我的文章 Windows10 & 11 安装 WSL2"><meta property="og:title" content="WSL 搭建生信分析环境"><meta property="og:description" content="在做生信分析的时候，很多情况下都会用到 Linux 环境，而大多数人的电脑都是 Windows 环境，目前 Windows 下使用 Linux 最主流的两种方法就是服务器和虚拟机，但服务器的价格比较高，并且在文件传输等方面不太方便；虚拟机对电脑的要求比较高，并且占用也很大、启动时间长且配置较为麻烦，现如今，在 Windows 上已经有 WSL 了，使用它做生信分析极大地提高了效率，避免了很多问题
WSL 的优点 Link to heading 安装、配置方便，Windows10/11 原生集成，可迅速安装配置 启动速度快，配合 VScode 可迅速进入工作状态 占用低，可以通过 .wslconfig 来限制占用的硬件资源 文件传输方便，可以直接打开 Windows 下的文件 WSL2 已支持图形界面 与 Windows 系统互相独立互不干扰 可以备份恢复，便于迁移 WSL 的缺点 Link to heading 由于 WSL2 与 Windows 通过网络协议互相访问，导致直接访问 Windows 系统下的文件时速度会下降 Windows 自带的 openssh 版本低，导致 VScode 会与 WSL 断开连接 WSL 下使用 Windows 代理时需要配置 默认安装在 C 盘，但可以自行下载安装包解压后安装在其他盘 WSL 的安装 Link to heading 参考我的文章 Windows10 & 11 安装 WSL2"><meta property="og:type" content="article"><meta property="og:url" content="https://yuanj.top/posts/jdksf7d9/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-08-15T20:49:31+08:00"><meta property="article:modified_time" content="2023-08-15T20:49:31+08:00"><link rel=canonical href=https://yuanj.top/posts/jdksf7d9/><link rel=preload href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.a839119b1aa7bfc3e0055cdab3ff54c50c8f3701d2041e2bf06daea11936adc3.css integrity="sha256-qDkRmxqnv8PgBVzas/9UxQyPNwHSBB4r8G2uoRk2rcM=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/favicon.ico sizes=any><link rel=icon type=image/png href=/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>Uncle4</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/about/>About</a></li><li class=navigation-item><a class=navigation-link href=/posts/>Posts</a></li><li class=navigation-item><a class=navigation-link href=/essay/>Essay</a></li><li class=navigation-item><a class=navigation-link href=/gestbook/>Gestbook</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://yuanj.top/posts/jdksf7d9/>WSL 搭建生信分析环境</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa fa-calendar" aria-hidden=true></i>
<time datetime=2023-08-15T20:49:31+08:00>August 15, 2023</time></span>
<span class=reading-time><i class="fa fa-clock-o" aria-hidden=true></i>
2-minute read</span></div><div class=tags><i class="fa fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/wsl/>WSL</a></span>
<span class=separator>•</span>
<span class=tag><a href=/tags/bioinformatics/>Bioinformatics</a></span></div></div></header><div class=post-content><blockquote><p>在做生信分析的时候，很多情况下都会用到 Linux 环境，而大多数人的电脑都是 Windows 环境，目前 Windows 下使用 Linux 最主流的两种方法就是服务器和虚拟机，但服务器的价格比较高，并且在文件传输等方面不太方便；虚拟机对电脑的要求比较高，并且占用也很大、启动时间长且配置较为麻烦，现如今，在 Windows 上已经有 WSL 了，使用它做生信分析极大地提高了效率，避免了很多问题</p></blockquote><h2 id=wsl-的优点>WSL 的优点
<a class=heading-link href=#wsl-%e7%9a%84%e4%bc%98%e7%82%b9><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li>安装、配置方便，Windows10/11 原生集成，可迅速安装配置</li><li>启动速度快，配合 VScode 可迅速进入工作状态</li><li>占用低，可以通过 .wslconfig 来限制占用的硬件资源</li><li>文件传输方便，可以直接打开 Windows 下的文件</li><li>WSL2 已支持图形界面</li><li>与 Windows 系统互相独立互不干扰</li><li>可以备份恢复，便于迁移</li></ul><h2 id=wsl-的缺点>WSL 的缺点
<a class=heading-link href=#wsl-%e7%9a%84%e7%bc%ba%e7%82%b9><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><ul><li>由于 WSL2 与 Windows 通过网络协议互相访问，导致直接访问 Windows 系统下的文件时速度会下降</li><li>Windows 自带的 openssh 版本低，导致 VScode 会与 WSL 断开连接</li><li>WSL 下使用 Windows 代理时需要配置</li><li>默认安装在 C 盘，但可以自行下载安装包解压后安装在其他盘</li></ul><h2 id=wsl-的安装>WSL 的安装
<a class=heading-link href=#wsl-%e7%9a%84%e5%ae%89%e8%a3%85><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>参考我的文章 <a href=https://www.hieroglyphs.top/posts/309de741/ class=external-link target=_blank rel=noopener>Windows10 & 11 安装 WSL2</a></p><h2 id=wsl-的配置>WSL 的配置
<a class=heading-link href=#wsl-%e7%9a%84%e9%85%8d%e7%bd%ae><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>此处默认以 Debian 系为例，我使用的是 Debian11</p><h3 id=换源>换源
<a class=heading-link href=#%e6%8d%a2%e6%ba%90><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>直接参考各大开源软件镜像站的文档即可，推荐中科大的，一行命令即可换源</p><ul><li><p><a href=https://mirrors.ustc.edu.cn/help/ class=external-link target=_blank rel=noopener>USTC Mirror Help</a></p></li><li><p><a href=https://mirrors-i.tuna.tsinghua.edu.cn/help/debian/ class=external-link target=_blank rel=noopener>清华开源软件镜像站使用帮助</a></p></li><li><p><a href=https://developer.aliyun.com/mirror/ class=external-link target=_blank rel=noopener>阿里巴巴开源镜像站</a></p></li></ul><h3 id=常用软件的安装>常用软件的安装
<a class=heading-link href=#%e5%b8%b8%e7%94%a8%e8%bd%af%e4%bb%b6%e7%9a%84%e5%ae%89%e8%a3%85><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p><strong>下载器</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt-get install wget curl
</span></span></code></pre></div><p><strong>Git</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt-get install git
</span></span></code></pre></div><p><strong>conda</strong></p><p>参考文章 <a href=https://www.hieroglyphs.top/posts/1d0dd329/ class=external-link target=_blank rel=noopener>Linux 下安装 conda</a></p><p><strong>oh-my-zsh</strong></p><p>更加美观、便捷的终端，使用清华镜像安装（需要先安装 Git）</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git clone https://mirrors.tuna.tsinghua.edu.cn/git/ohmyzsh.git
</span></span><span class=line><span class=cl><span class=nb>cd</span> ohmyzsh/tools
</span></span><span class=line><span class=cl><span class=nv>REMOTE</span><span class=o>=</span>https://mirrors.tuna.tsinghua.edu.cn/git/ohmyzsh.git sh install.sh
</span></span></code></pre></div><p><strong>Nodejs</strong></p><p>Debian 系发行版自带的 Nodjes 版本较低，使用 NodeSource 维护的 PPA 安装指定版本的 Nodejs（需要先安装 curl），修改版本号即可</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -fsSL https://deb.nodesource.com/setup_18.x <span class=p>|</span> sudo -E bash -
</span></span><span class=line><span class=cl>sudo apt-get update
</span></span><span class=line><span class=cl>sudo apt-get install nodejs
</span></span></code></pre></div><p><strong>Neofetch</strong></p><p>系统信息查看工具</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt-get install neofetch
</span></span></code></pre></div><p>输入 neofetch 即可查看系统版本、CPU、内存等信息</p><p><strong>其他</strong></p><p><a href=https://www.hieroglyphs.top/posts/24ed802/ class=external-link target=_blank rel=noopener>Linux 下安装 BUSCO</a></p><h3 id=连接-vscode>连接 VScode
<a class=heading-link href=#%e8%bf%9e%e6%8e%a5-vscode><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>安装最新版的 <a href=https://code.visualstudio.com/ class=external-link target=_blank rel=noopener>Vscode</a>，然后在 VScode 的插件商店搜索并安装名为 WSL 的插件</p><p>插件安装完成后在 WSL2 的终端中输入<code>code .</code>，等待下载相关文件后 VScode 便会自动打开，后面直接打开 VScode 就会自动启动 WSL2</p><h3 id=使用-git-的-openssh>使用 Git 的 openssh
<a class=heading-link href=#%e4%bd%bf%e7%94%a8-git-%e7%9a%84-openssh><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><blockquote><p>由于 Windows 自带的 openssh 版本较低，可能会导致 WSL 与 VScode 断开连接，所以我们使用最新版 Git 的 openssh</p></blockquote><p>先使用 <a href="https://registry.npmmirror.com/binary.html?path=git-for-windows/" class=external-link target=_blank rel=noopener>淘宝镜像</a> 下载安装最新版的 Git</p><p>在 Windows 系统的开始菜单搜索<code>编辑系统环境变量</code>，以此点击<code>环境变量</code>——系统环境变量里的<code>Path</code>——<code>编辑</code>——<code>新建</code></p><p>将 Git 路径下的<code>usr\bin</code>添加进去，例如我的 Git 安装在默认路径，这里就写<code>C:\Program Files\Git\usr\bin</code></p><p>然后点击上移，将刚刚添加的 Git 的路径移动到<code>%SYSTEMROOT%\System32\OpenSSH\</code>之上，代表优先使用 Git 的 openssh</p><p>最后打开 powershell 或 cmd，输入下列命令关闭 WSL2，再次启动 WSL2 即可</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=n>wsl</span> <span class=p>-</span><span class=n>-shutdown</span>
</span></span></code></pre></div><h3 id=限制-wsl2-的内存>限制 WSL2 的内存
<a class=heading-link href=#%e9%99%90%e5%88%b6-wsl2-%e7%9a%84%e5%86%85%e5%ad%98><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>进入 wsl，输入下列命令建立 .wslconfig 文件</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi <span class=s2>&#34;</span><span class=k>$(</span>wslpath <span class=s2>&#34;C:\Users\YourUsername\.wslconfig&#34;</span><span class=k>)</span><span class=s2>&#34;</span>
</span></span></code></pre></div><p>把 yourUsername 换成自己的 Windows 用户名</p><p>然后输入下列内容</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>wsl2<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>memory</span><span class=o>=</span>1GB 
</span></span><span class=line><span class=cl><span class=nv>processors</span><span class=o>=</span><span class=m>1</span>
</span></span><span class=line><span class=cl><span class=nv>swap</span><span class=o>=</span>1GB
</span></span></code></pre></div><p>这些内容分别指定了 WSL2 实例的最大内存为 1GB、占用核心为 1 核心和交换分区为 1GB</p><p>保存后打开 power shell，输入 wsl &ndash;shutdown 关闭 wsl，再重新进入即可</p><h2 id=扩展使用>扩展使用
<a class=heading-link href=#%e6%89%a9%e5%b1%95%e4%bd%bf%e7%94%a8><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><h3 id=在指定目录打开终端>在指定目录打开终端
<a class=heading-link href=#%e5%9c%a8%e6%8c%87%e5%ae%9a%e7%9b%ae%e5%bd%95%e6%89%93%e5%bc%80%e7%bb%88%e7%ab%af><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>默认情况下，VScode 中终端会在用户根目录下打开，即~目录，但~下有很多软件和系统的配置文件等，会影响我们的视野，我采用的方法是在根目录下建立一个<code>work</code>目录，然后 cd 到该目录，再输入<code>code .</code>打开 VScode，这样每次打开终端都会再<code>work</code>目录下打开，将所需要的文件放进去，会方便很多</p><h3 id=在-windows-下查看-linux-下文件>在 Windows 下查看 Linux 下文件
<a class=heading-link href=#%e5%9c%a8-windows-%e4%b8%8b%e6%9f%a5%e7%9c%8b-linux-%e4%b8%8b%e6%96%87%e4%bb%b6><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>在终端中输入</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>explorer.exe .
</span></span></code></pre></div><p>就会在当前目录打开 Windows 的文件资源管理器，但很多文件无法在 Windows 下直接编辑，没有权限，建议还是使用 VScode 编辑文件</p><h3 id=wsl-直接访问-windows-下的文件>WSL 直接访问 Windows 下的文件
<a class=heading-link href=#wsl-%e7%9b%b4%e6%8e%a5%e8%ae%bf%e9%97%ae-windows-%e4%b8%8b%e7%9a%84%e6%96%87%e4%bb%b6><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>Windows 下的各个盘全部默认挂载在 WSL<code>/</code>目录下的<code>/mnt</code>目录中，例如 C 盘的路径为<code>/mnt/c</code>，这样我们就可以直接在 WSL 中访问 Windows 下的文件，但需要注意的是，WSL 为 Linux 系统，与 Windows 系统的文件系统不同，例如 Linux 下的文件及文件夹名称大小写不同，不能包含空格，所以这里使用的时候需要注意</p><h3 id=git-clone-后没有权限>git clone 后没有权限
<a class=heading-link href=#git-clone-%e5%90%8e%e6%b2%a1%e6%9c%89%e6%9d%83%e9%99%90><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>输入下列命令将克隆的文件与文件夹的所有者改为指定用户</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo chown -R username ~/work/xxxx
</span></span></code></pre></div><h2 id=wsl-的备份与导入>WSL 的备份与导入
<a class=heading-link href=#wsl-%e7%9a%84%e5%a4%87%e4%bb%bd%e4%b8%8e%e5%af%bc%e5%85%a5><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p><strong>导出 WSL</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=n>wsl</span> <span class=p>-</span><span class=n>-export</span> <span class=p>&lt;</span><span class=n>Distribution</span> <span class=n>Name</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=n>FileName</span><span class=p>&gt;</span>
</span></span></code></pre></div><p><strong>导入 WSL</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=n>wsl</span> <span class=p>-</span><span class=n>-import</span> <span class=p>&lt;</span><span class=n>Distribution</span> <span class=n>Name</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=n>InstallLocation</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=n>FileName</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>将指定 tar 文件导入和导出为新的发行版 选项包括：</p><p>&ndash;vhd：指定导入/导出发行版应为 .vhdx 文件，而不是 tar 文件
&ndash;version：（仅导入）指定将发行版导入为 WSL 1 还是 WSL 2 发行版</p><h2 id=wsl-的卸载>WSL 的卸载
<a class=heading-link href=#wsl-%e7%9a%84%e5%8d%b8%e8%bd%bd><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=n>wsl</span> <span class=p>-</span><span class=n>-unregister</span> <span class=p>&lt;</span><span class=n>DistributionName</span><span class=p>&gt;</span>
</span></span></code></pre></div><h2 id=参考资料>参考资料
<a class=heading-link href=#%e5%8f%82%e8%80%83%e8%b5%84%e6%96%99><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p><a href=https://learn.microsoft.com/zh-cn/windows/wsl/install class=external-link target=_blank rel=noopener>使用 WSL 在 Windows 上安装 Linux</a></p><p><a href=https://learn.microsoft.com/zh-cn/windows/wsl/basic-commands class=external-link target=_blank rel=noopener>WSL 的基本命令</a></p></div><footer></footer></article></section></div><footer class=footer><section class=container>©
2023
YuanJiao</section></footer></main><script src=/js/coder.min.bf3def4cc889836d15cf3ab6357b9aaef07fabc3abf78b2a3b6eb00cd53c34e5.js integrity="sha256-vz3vTMiJg20Vzzq2NXuarvB/q8Or94sqO26wDNU8NOU="></script></body></html>